# Annette settings
annette {

  enabled += "annette.imc.ImcModule"

  services.defaultTimeout = 30s

  secret = "odw9BImB5pkF`XasEdfuuA=gueReN0;b2eaY1VVziUNTyfdesmmkAk0InRzKRJ3S"

  http {
    active = true
    host = "localhost"
    port = 9000
  }
  cluster = false

  // таймаут для акторов (в мс)
  actorTimeout = 20s

  // количество параллельных акторов данных (по умолчанию 4)
  parallelProc = 8

  core {
    AuthenticationService {
      rememberMeSessionTimeout = 14d
      sessionTimeout = 1h
    }
  }

  security {
    # Ссылка на форму входа в систему.
    # Если результат проверки аутентификации пользователя отрицательный, то перенаправляем на эту ссылку
    # Uri содержит URI первоначального запроса, после входа в систему
    login = "/auth/login?uri=:uri"

    # Tаймаут для запроса AuthenticationService (в миллисекундах),
    # Если ответ не получен после таймаута считаем, что пользователь не аутентифицирован
    # Таймаут по умолчанию 3 секунды
    authenticationServiceTimeout = 30s

    # Таймаут сессии пользователя в минутах
    sessionTimeout = 600
  }

  cassandra {
    hosts = [ "127.0.0.1" ]
    keyspace = "annette_sphera"
    user = "annette"
    password = "abc"
  }

  //  cassandra {
  //    hosts = [ "192.168.1.243", "192.168.1.231", "192.168.1.232", "192.168.1.233" ]
  //    keyspace = test
  //    user = "valery"
  //    password = "abc"
  //  }

  core.initDb {
    createSchema = false

    languages = [
      {id = "RU", name = "Russian"},
      {id = "EN", name = "English"}
    ]

    applications = [
      {
        id = "BPM"
        code = "bpm"
        name = "Бизнес процессы"
      },
      {
        id = "ADMIN"
        code = "admin"
        name = "Администрирование"
      },
      {
        id = "IMC"
        code = "imc"
        name = "Экспертиза ММК"
      },
      {
        id = "UIC"
        code = "uic"
        name = "Идентификационные карты"
      }
    ]

    tenants = [
      {
        id = "SPHERA"
        name = "Сфера"
        applications = ["BPM", "ADMIN"]
        languages = ["RU", "EN"]
      },
      {
        id = "ANIKLAB"
        name = "Аник Лаб"
        applications = ["BPM", "IMC", "ADMIN", "UIC"]
        languages = ["RU", "EN"]
      },
      {
        id = "IMC"
        name = "ММК"
        applications = ["IMC", "BPM"]
        languages = ["RU", "EN"]
      }
    ]

    users = [
      {
        firstName = "Давид"
        lastName = "Кантемиров"
        email = "it@kantemirov.ru"
        phone = "+79166633681"
        avatarUrl = "./assets/app/media/img/users/user4.jpg"
        tenants = [
          { tenant = "ANIKLAB" },
          { tenant = "IMC", roles = ["admin", "chairman", "expert" ]}
        ]
      },
      {
        firstName = "Дмитрий"
        lastName = "Рогачев"
        email = "dmitry.rogachev@gmail.com"
        phone = "+79104216192"
        avatarUrl = "./assets/app/media/img/users/user1.jpg"
        tenants = [
          { tenant = "ANIKLAB" },
          { tenant = "IMC", roles = ["admin", "chairman", "expert" ]}
        ]
      },
      {
        firstName = "Максим"
        lastName = "Авдеев"
        email = "maxim.avdeev@gmail.com"
        tenants = [
          { tenant = "ANIKLAB" },
          { tenant = "IMC" }
        ]
      },
      {
        firstName = "Игорь"
        lastName = "Немцов"
        email = "igor.nemtsov@gmail.com"
        tenants = [
          { tenant = "ANIKLAB" },
          { tenant = "IMC", roles = ["admin", "chairman", "expert" ]}
        ]
      },
      {
        firstName = "Максим"
        lastName = "Киржаков"
        email = "maksim.kirjakov@yandex.ru"
        tenants = [
          { tenant = "ANIKLAB" }
        ]
      },
      {
        firstName = "Светлана"
        lastName = "Смирнова"
        email = "svetlana.smirnova@gmail.com"
        tenants = [
          { tenant = "ANIKLAB" }
        ]
      },
      {
        firstName = "Феликс"
        lastName = "Кантемиров"
        email = "felix@kantemirov.ru"
        phone = "+79166633681"
        avatarUrl = "./assets/app/media/img/users/user4.jpg"
        tenants = [
          { tenant = "ANIKLAB" },
          { tenant = "IMC", roles = ["admin", "chairman", "expert" ]}
        ]
      },
      {
        firstName = "Иван"
        lastName = "Рогачев"
        email = "ivan.rogachev@gmail.com"
        phone = "+79104306891"
        avatarUrl = "./assets/app/media/img/users/user1.jpg"
        tenants = [
          { tenant = "ANIKLAB" },
          { tenant = "IMC", roles = ["admin", "chairman", "expert" ]}
        ]
      },
      {
        firstName = "Петр"
        lastName = "Авдеев"
        email = "petr.avdeev@gmail.com"
        tenants = [
          { tenant = "ANIKLAB" },
          { tenant = "IMC" }
        ]
      },
      {
        firstName = "Дмитрий"
        lastName = "Протопенко"
        email = "dmitri.protopenko@gmail.com"
        tenants = [
          { tenant = "ANIKLAB" },
          { tenant = "IMC", roles = ["admin", "chairman", "expert" ]}
        ]
      },
      {
        firstName = "Владимир"
        lastName = "Астахов"
        email = "vladimir.astahov@gmail.ru"
        tenants = [
          { tenant = "ANIKLAB" }
        ]
      },
      {
        firstName = "Нина"
        lastName = "Васнецова"
        email = "nina.vasnetsova@gmail.com"
        tenants = [
          { tenant = "ANIKLAB" }
        ]
      }
    ]
  }

  notification {
    debug = false
    mail {
      smtp {
        auth = true
        starttls.enable = true
        host = "smtp.gmail.com"
        ssl.trust = "smtp.gmail.com"
        port = 587
        socketFactory.port = 587
        socketFactory.class = "javax.net.ssl.SSLSocketFactory"
        connectiontimeout = 2000
        timeout = 6000
      }
      from = "davidkantemirov2017@gmail.com"
      username = "davidkantemirov2017@gmail.com"
      password = ""
    }
    sms {
      api-url = "https://app.mango-office.ru/vpbx/"
      api-key = "api-key"
      api-salt = ""
      route = "commands/sms"
      from-extension = 101 // идентификатор сотрудника (internal number)
    }
  }
}

akka {

  actor.debug.receive = off
  //loglevel = DEBUG

    loglevel = INFO
  //  stdout-loglevel = INFO
  #event-handlers = ["akka.event.Logging$DefaultLogger"]
  loggers = ["akka.event.slf4j.Slf4jLogger"]
  log-dead-letters = 0
  log-dead-letters-during-shutdown = off
  //  actor {
  //    provider = "akka.cluster.ClusterActorRefProvider"
  //  }
  //  remote {
  //    enabled-transports = ["akka.remote.netty.tcp"]
  //    log-remote-lifecycle-events = off
  //    netty.tcp {
  //      hostname = "127.0.0.1"
  //      port = 2551
  //      hostname = ${?HOST}
  //      port = ${?PORT}
  //    }
  //  }
  //  cluster {
  //    seed-nodes = [
  //     // "akka.tcp://annette@192.168.1.243:2551"
  //      "akka.tcp://annette@127.0.0.1:2551"
  //    ]
  //    roles = [ "seed" ]
  //    role {
  //      seed.min-nr-of-members = 1
  //    }
  //  }
}

akka.persistence.journal.plugin = "cassandra-journal"
akka.persistence.snapshot-store.plugin = "cassandra-snapshot-store"

cassandra-journal {
  contact-points = [ "127.0.0.1" ]
  keyspace = "annette_sphera"
  authentication{
    username = "annette"
    password = "abc"
  }
}

cassandra-snapshot-store {
  contact-points = [ "127.0.0.1" ]
  keyspace = "annette_sphera"
  authentication{
    username = "annette"
    password = "abc"
  }
}

akka.actor.warn-about-java-serializer-usage = on